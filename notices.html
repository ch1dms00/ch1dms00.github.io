<body>
    <h2>공지사항 관리</h2>
    <form id="noticeForm">
      <input type="text" id="title" placeholder="제목" required>
      <textarea id="content" placeholder="내용" required></textarea>
      <button type="submit">공지 추가</button>
    </form>
  
    <ul id="noticeList"></ul>
  
    <script>
      async function loadNotices() {
        const res = await fetch('/api/notices');
        const notices = await res.json();
        const list = document.getElementById('noticeList');
        list.innerHTML = '';
        notices.forEach(notice => {
          const li = document.createElement('li');
          li.innerHTML = `
            <strong>${notice.title}</strong>: ${notice.content}
            <button onclick="deleteNotice('${notice.id}', this)">삭제</button>
          `;
          list.appendChild(li);
        });
      }
  
      async function deleteNotice(id, btn) {
        await fetch(`/api/notices/${id}`, { method: 'DELETE' });
        btn.parentElement.remove();  // 화면에서 즉시 제거
      }
  
      document.getElementById('noticeForm').addEventListener('submit', async e => {
        e.preventDefault();
        const title = document.getElementById('title').value;
        const content = document.getElementById('content').value;
  
        const res = await fetch('/api/notices', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ title, content })
        });
  
        const newNotice = await res.json();
        const li = document.createElement('li');
        li.innerHTML = `
          <strong>${newNotice.title}</strong>: ${newNotice.content}
          <button onclick="deleteNotice('${newNotice.id}', this)">삭제</button>
        `;
        document.getElementById('noticeList').appendChild(li);
        e.target.reset();
      });
  
      loadNotices();
    </script>
  </body>
  
